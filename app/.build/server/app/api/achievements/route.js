"use strict";(()=>{var e={};e.id=376,e.ids=[376],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},27790:e=>{e.exports=require("assert")},78893:e=>{e.exports=require("buffer")},84770:e=>{e.exports=require("crypto")},17702:e=>{e.exports=require("events")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},86624:e=>{e.exports=require("querystring")},17360:e=>{e.exports=require("url")},21764:e=>{e.exports=require("util")},71568:e=>{e.exports=require("zlib")},30531:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>v,patchFetch:()=>q,requestAsyncStorage:()=>m,routeModule:()=>l,serverHooks:()=>h,staticGenerationAsyncStorage:()=>x});var n={};t.r(n),t.d(n,{GET:()=>d,dynamic:()=>c});var i=t(79182),s=t(72007),o=t(56719),a=t(93442),u=t(15649),p=t(35970);let c="force-dynamic";async function d(){try{let e=await (0,u.getServerSession)();if(!e?.user?.id)return a.NextResponse.json({error:"Unauthorized"},{status:401});let r=e.user.id,t=await p._.userAchievement.findMany({where:{userId:r},include:{achievement:!0},orderBy:{unlockedAt:"desc"}}),n=t.map(e=>e.achievementId),i=await p._.achievement.findMany({where:{id:{notIn:n}},orderBy:{points:"asc"}}),s=await p._.playerProfile.findUnique({where:{userId:r}});return a.NextResponse.json({userAchievements:t,availableAchievements:i,totalPoints:s?.totalPoints||0,currentLevel:s?.currentLevel||"rookie"})}catch(e){return console.error("Error fetching achievements:",e),a.NextResponse.json({error:"Failed to fetch achievements"},{status:500})}}let l=new i.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/achievements/route",pathname:"/api/achievements",filename:"route",bundlePath:"app/api/achievements/route"},resolvedPagePath:"/home/ubuntu/hoopsquest/app/app/api/achievements/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:m,staticGenerationAsyncStorage:x,serverHooks:h}=l,v="/api/achievements/route";function q(){return(0,o.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:x})}},35970:(e,r,t)=>{t.d(r,{_:()=>i});let n=require("@prisma/client"),i=global.prisma||new n.PrismaClient}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[372,649,609],()=>t(30531));module.exports=n})();